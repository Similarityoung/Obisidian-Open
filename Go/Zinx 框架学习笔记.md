---
title: Zinx 框架学习笔记
tags:
  - go
  - learn
categories:
  - Back
date: 2024-09-24T15:13:40+08:00
draft: true
---
### 基础 server 模块启动实现

Q: 为什么返回接口 IServer 而不是 server

```go
/* 创建一个服务器句柄 */ 
func NewServer (name string) ziface.IServer { 
	s:= &Server {
	Name :name, IPVersion:"tcp4", IP:"0.0.0.0", Port:7777, }
	return s 
}
```

A : `NewServer` 函数返回一个 `ziface.IServer` 类型的接口而不是直接返回 `Server` 类型的结构体，这种设计方式具有几个优点：

1. **抽象化**：返回一个接口而不是具体的结构体可以抽象化组件之间的交互。使用接口可以隐藏具体实现的细节，使得调用者只需要关心接口提供的方法。这样，如果未来需要改变具体的实现，只要新的实现符合接口的定义，调用代码不需要做任何修改。
    
2. **灵活性和扩展性**：使用接口使得代码更加灵活和易于扩展。比如，如果你想实现一个具有不同特性的服务器，只需创建一个新的结构体，实现相同的接口。这样你可以在不修改现有代码的情况下，为系统引入新的功能。
    
3. **依赖倒置原则**：这是面向对象设计原则之一，主张高层模块不应该依赖低层模块，它们都应该依赖于抽象。接口作为一种高级的抽象，确保了系统各个部分的低耦合性，增加了代码的稳定性。
    
4. **测试和模拟**：使用接口可以更容易地进行单元测试。你可以创建一个或多个模拟（mock）对象来实现同一接口，这样就可以在不涉及具体服务器实现的情况下测试系统的其他部分。
    

因此，返回 `ziface.IServer` 接口而不是具体的 `Server` 结构体，在软件工程中是一种常见且有益的做法，特别是在构建需要高度维护和扩展性的大型软件系统时。这种方式提供了更好的解耦和更灵活的代码管理策略。

